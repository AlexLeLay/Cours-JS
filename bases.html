<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/bases.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
    <title>Les bases du langage JavaScript</title>
</head>

<body>
    <main>
        <h1>Les bases du langage JavaScript</h1>
        <h2>Les variables</h2>
        <p>Une variable est un espace mémoire qui stocke une valeur (un nombre, du texte, etc.)</p>
        <p>En JS, on déclare une variable avec les mots-clés <b>let</b>, <b>const</b> et anciennement <i>var</i>
            (toujours utilisé dans du vieux code, à proscrire) voir examples dans bases.js</p>

        <h2>Les boucles</h2>
        <p>Une <b>boucle</b> est une structure qui permet de <b>répéter</b> un bloc de code tant qu'une condition est
            vraie</p>
        <p>C'est une façon automatique de répéter des instructions sans devoir les écrire plusieurs fois</p>
        <h3>Les types de boucles</h3>
        <ul>
            <li>La boucle While</li>
            <li>La boucle Do... While</li>
            <li>La boucle For</li>
            <li>La boucle For...of</li>
            <li>La boucle For...in</li>
        </ul>
        <h3>La boucle while</h3>
        <p>On l'utilise quand on ne connait pas forcément à l'avance le nombre de tours</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                // condition > cette condition doit être vraie pour pouvoir continuer
                // (comme le if, cependant ne jamais mettre de "==" ou "===")
                while (condition) {
                   // code à exectuer
                }
            </code>
        </pre>
        <p>Exemple concret</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                let n = 0;
                while (n < 6) {
                    console.log(n + " * 5 est égale à " + n * 5);
                    n++;
                }
            </code>
        </pre>

        <h3>La boucle do...while</h3>
        <p>C'est comme la boucle while, mais elle s'execute au moins une fois avant de tester la condition</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                do {
                    // code
                } while (condition);
            </code>
        </pre>
        <p>Exemple concret</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                let nbr;
                let nbr_throw = 0;
                do {
                    nbr = Math.floor((Math.random() * 6)) + 1;
                    console.log(`Résultat du dé : ${nbr}`);
                    nbr_throw++;
                } while (nbr !== 6)
            </code>
        </pre>

        <h3>La boucle for</h3>
        <p>La plus classique quand on connait à l'avance le nombre de répétitions</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                for(initialisation; condition; incrémentation) {
                    // code
                }
            </code>
        </pre>
        <p>Exemple concret</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                for (let i = 0; i < 5; i++) {
                    console.log(`Compteur Lecornu : ${i}`);
                }
            </code>
        </pre>
        <p>Une boucle for permet de <b>traverser</b> un tableau à partir de ses indexs</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                let voitures = ["Dacia", "Lada", "Audi", "Daihatsu", "Toyota", "Chevrolet"];

                for (let i = 0; i < voitures.length; i++) {
                    console.log(voitures[i]);
                    
                }   
            </code>
        </pre>
        <h3>La boucle for...of</h3>
        <div id="container"></div>
        <pre class="line-numbers">
            <code class="language-javascript">
                const container = document.getElementById("container");
                const gafam= ["Google","Amazon", "Facebook", "Apple", "Microsoft"];
                const ul = document.createElement("ul");
                container.appendChild(ul);
                for (let brand of gafam) {
                    const li = document.createElement("li")
                    li.innerHTML = brand;
                    ul.appendChild(li);
                }
            </code>
        </pre>
        <h3>La boucle for...in</h3>
        <p>Une boucle for...in permet de parcourir <b>les propriétés d'un objet</b></p>
        <div id="pen-container"></div>
        <pre class="line-numbers">
            <code class="language-javascript">
                // Pour chaque clé dans stylo
                for (let cle in stylo) {
                    // On récupère la valeur liée à la clé
                    let value = stylo[cle];
                    // console.log(value);
                    // On va créer un li pour chaque clé dans l'objet
                    let li = document.createElement("li");
                    // Ici c'est un exemple de littéral de gabarit qui facilite l'écriture des concaténations
                    // Obligatoirement guillements du 7 ``
                    li.innerHTML = `<span class='cyan'>${cle}</span>: ${value}`;
                    // Le li créé est accroché à l'ul
                    ulPen.appendChild(li);
                    
                }
            </code>
        </pre>
        <h2>Les mots clés BREAK et CONTINUE</h2>
        <p>Break permet de sortir d'une boucle</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                for (let i = 0; i < 10; i++) {
                    if (i === 5) {
                        break
                    }
                    console.log(i);
                }
            </code>
        </pre>
        <p>Continue permet de sauter une itération sans arrêter la boucle</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                for (let i = 0; i < 10; i++) {
                    if (i % 2 === 0) {
                        continue
                    }
                    console.log(i);   
                }
            </code>
        </pre>
        <h2>Les Tableaux</h2>
        <p>Un tableau en JavaScript est un objet spécial qui peut contenir plusieurs valeurs dans une seule variable</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                const fruits = ["Pomme", "Banane", "Orange"];
            </code>
        </pre>
        <p>Comment accéder aux éléments</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                const fruits = ["Pomme", "Banane", "Orange"];
                console.log(fruits[0]); // "Pomme"
                console.log(fruits[1]); // "Banane"
                console.log(fruits[2]); // "Orange"
            </code>
        </pre>
        <p>Comment modifier un élément d'un tableau</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                const fruits = ["Pomme", "Banane", "Orange"];
                fruits[1] = "Kiwi";
            </code>
        </pre>
        <p>Ajouter et supprimer un élément d'un tableau</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                const fruits = ["Pomme", "Banane", "Orange"];

                // Supprimer le dernier élément
                fruits.pop();
                // Supprimer le premier élément
                fruits.shift();
                // Ajouter un élément en fin de tableau
                fruits.push("Fraise");
                // Ajouter un élément au début de tableau
                fruits.unshift("Melon");
            </code>
        </pre>
        <p>Autres fonctions utiles</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                // Autres fonctions utiles
                const fruits3 = ["framboise", "tomate", "coing", "poire"];

                // Trouver l'index d'un élément

                let posFruit = fruits3.indexOf("tomate");
                console.log(posFruit);

                // Vérifier si un élément est présent
                console.log(fruits3.includes("orange"));
                // convertir un tableau en chaine de caractères
                let saladeDeFruits = fruits3.join(", ");
                console.log(saladeDeFruits);
            </code>
        </pre>

        <h2>Les chaines de caractères</h2>
        <p>Une chaine de caractères ou string est une suite de caractères (lettres, chiffres, symboles, ...)</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                let txt = "Bonjour le monde";

                let nom = "Alice";
                let message = "Salut !";
                let phrase = `${message} ${nom}` // Salut ! Alice
            </code>
        </pre>
        <pre class="line-numbers">
            <code class="language-javascript">
                // connaitre la taille d'une string
                let mot = "jean-Michel";
                console.log(mot.length);
                // Attend ?!! length
                console.log(mot[3]);
                // on vous a menti depuis le début les strings sont ds tableaux

                // Pour ajouter par exemple une majuscule au premier élément
                const mot2 = mot.charAt(0).toUpperCase() + mot.slice(1);
                console.log(mot2);
            </code>
        </pre>
        <h2>Itérables et itérateurs</h2>
        <p>Un itérable est un objet qui peut être parcouru (itéré) par un intérateur comme une boucle</p>
        <p>Exemple d'objets itérables</p>
        <ul>
            <li>Tableau []</li>
            <li>String "abc"</li>
            <li>Arguments de fonctions</li>
            <li>Les clés dans les objets</li>
        </ul>
        <h3>Les méthodes itératrices</h3>
        <p>Liste des méthodes itératices</p>
        <ul>
            <li>.forEach()</li>
            <li>.map()</li>
            <li>.filter()</li>
            <li>.reduce()</li>
            <li>.find()</li>
            <li>.some()</li>
            <li>.every()</li>
        </ul>
        <p>Aucune de ces méthodes ne modifie les tableaux d'origine</p>
        <pre class="line-numbers">
            <code class="language-javascript">
                // Méthodes itératrices

                // .forEach()

                const videoGames = ["Mario", "Pandemonium", "Gran Turismo", "Metal Gear", "Zelda", "Hollow Knight", "Rocket League"];
                const nbrIte = [5, 10, Math.PI, 19, 478, 255, 64712, 2.5, 47.899]

                // Écriture standard
                // videoGames.forEach(videoGame => {
                //     console.log(videoGame);
                // })

                videoGames.forEach((videoGame, index) => {
                    console.log(`Index ${index} : ${videoGame}`);
                })

                // .map()
                // Retourne un tableau après transformation de chaque élément

                const upper = videoGames.map(videoGame => videoGame.toUpperCase());
                console.log(upper);

                const pow2 = nbrIte.map(n => n ** 2);
                console.log(pow2);


                // .filter()
                // Retourne un tableau avec uniquement les éléments qui ont passé un test

                // On récupère dans un tableau uniquement les nombres pairs
                const even = nbrIte.filter(n => n % 2 === 0);
                console.log(even);

                // On récupère dans un tableau uniquement les noms des jeux qui commencent par un m
                const mGames = videoGames.filter(vg => vg.charAt(0).toLowerCase() === "m");
                console.log(mGames);

                // .reduce()
                // Il accumule une valeur à partir des éléments du tableau

                const prices = [10, 15.75, 78, 12];
                const totalPrice = prices.reduce((acc, val) => acc + val, 0)
                console.log(totalPrice);

                // Au début acc = 0
                // acc + val = 10
                // 10 + 15.75
                // 25.75 + 78
                // 103.75 + 12
                // 115.75

                // .find()
                // Retourne le *PREMIER* élément qui passe un test

                const users = [
                    {id: 1, nom: "Jean-Michel"},
                    {id: 2, nom: "Jean-Marcel"},
                    {id: 3, nom: "Jean-Marc"},
                    {id: 4, nom: "Jean-Eude"},
                    {id: 5, nom: "Jean-Kévin"}
                ]

                // Je veux récupérer le premier élément d'id 4

                const user = users.find(u => u.id === 4);
                console.log(user);


                // .some() et .every()
                // .some() vérifié qu'au moins un des éléments du tableau satisfait la condition
                // .every() vérifié que tous les éléments satisfont la condition

                const nbrSome = [1, 5, 4, 74, 52356];
                const strEvery = ["Autruche", "Ane", "Anguille", "Alligator"];

                console.log(nbrSome.some(n => n % 2 === 0));
                console.log(nbrSome.every(n => n % 2 === 0));
                console.log(strEvery.every(s => s.charAt(0).toLowerCase() === "a"));

            </code>
        </pre>
    </main>
</body>

</html>